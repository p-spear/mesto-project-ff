{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/./src/components/api.js","webpack://mesto/./src/components/card.js","webpack://mesto/./src/components/modal.js","webpack://mesto/./src/components/validation.js","webpack://mesto/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: '439b17a4-80c1-4737-be9b-53f1a70fd84f',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst handleResponse = (response) => {\r\n  if (response.ok) {\r\n    return response.json();\r\n  } else {\r\n    return Promise.reject(`Ошибка: ${response.status}`);\r\n  }\r\n}\r\n\r\nexport const getProfileData = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const postProfileData = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const postNewCardData = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const deleteCardFromServer = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const changeLike = (cardId, method) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const postAvatar = (link) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: link\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};\r\n","import { changeLike } from './api';\r\n\r\nexport const createCard = (dataCard, template, like, openImagePopup, onDeleteCard, ownerId) => {\r\n  const cardElement = template.querySelector('.places__item').cloneNode(true);\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const buttonLikeCard = cardElement.querySelector('.card__like-button');\r\n  const likesCounter = cardElement.querySelector('.card__like-counter');\r\n  const imageCard = cardElement.querySelector('.card__image');\r\n  const isLiked = dataCard.likes.map((card) => card._id).includes(ownerId); \r\n  \r\n  cardElement.querySelector('.card__title').textContent = dataCard.name;\r\n  imageCard.src = dataCard.link;\r\n  imageCard.alt = dataCard.name;\r\n\r\n  if(ownerId === dataCard.owner._id) {\r\n    deleteButton.addEventListener('click', function() {\r\n      onDeleteCard(dataCard._id, cardElement);\r\n      //deleteCard(cardElement, dataCard._id);\r\n    });\r\n  } else {\r\n    deleteButton.style.display = 'none';\r\n  }\r\n\r\n  buttonLikeCard.addEventListener('click', function(evt) {\r\n    like(evt.target, likesCounter, dataCard._id, ownerId);\r\n  });\r\n\r\n  imageCard.addEventListener('click', function(evt) {\r\n      openImagePopup(evt.target);\r\n  });\r\n\r\n  renderLikes(buttonLikeCard, likesCounter, dataCard.likes.length, isLiked);\r\n\r\n  return cardElement;\r\n}\r\n\r\n/* export const deleteCard = (cardElement, cardId) => {\r\n  deleteCardFromServer(cardId)\r\n  .then((result) => {\r\n    cardElement.remove();\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n} */\r\n\r\nexport const like = (icon, likesCounter, cardId, ownerId) => {\r\n  changeLike(cardId, icon.classList.contains('card__like-button_is-active') ? 'DELETE' : 'PUT')\r\n  .then((data) => {\r\n    renderLikes(icon, likesCounter, data.likes.length, data.likes.map((card) => card._id).includes(ownerId));\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n}\r\n\r\nconst renderLikes = (buttonLikeCard, likesCounter, numberOfLikes, isLiked) => {\r\n  buttonLikeCard.classList.toggle('card__like-button_is-active', isLiked);\r\n  likesCounter.textContent = numberOfLikes;\r\n}\r\n ","const handleEscKeyUp = (evt) => {\r\n  if (evt.key === \"Escape\") {\r\n    const popup = document.querySelector('.popup_is-opened');\r\n    closeModal(popup);\r\n  }\r\n}\r\n\r\nexport const openModal = (modal) => {\r\n  modal.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', handleEscKeyUp);\r\n};\r\n\r\nexport const closeModal = (modal) => {\r\n  modal.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', handleEscKeyUp);\r\n};\r\n\r\nexport const addListenerToPopup = (elem) => {\r\n  const cross = elem.querySelector('.popup__close');\r\n  cross.addEventListener(\"click\", function() {\r\n  closeModal(elem);\r\n  });\r\n  \r\n  elem.addEventListener('mousedown', function(event) {\r\n    if(event.target.classList.contains('popup')) {\r\n      closeModal(event.target);\r\n    }\r\n  });\r\n}","export const enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n}\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', () => {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if (!inputElement.validity.valid) {\r\n    if (inputElement.validity.patternMismatch) {\r\n      inputElement.setCustomValidity(inputElement.dataset.patternErrorMessage);\r\n    } else {\r\n      inputElement.setCustomValidity('');\r\n    }\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n}\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  errorElement.textContent = errorMessage;\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n}\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = '';\r\n  inputElement.setCustomValidity('');\r\n}\r\n\r\nexport const clearValidation = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  inputList.forEach((inputElement) => {\r\n      hideInputError(formElement, inputElement, validationConfig);\r\n  });\r\n  disableButton(buttonElement, validationConfig);\r\n}\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  })\r\n}\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if(hasInvalidInput(inputList)) {\r\n    disableButton(buttonElement, validationConfig);\r\n  } else {\r\n    enableButton(buttonElement, validationConfig);\r\n  }\r\n}\r\n\r\nconst disableButton = (buttonElement, validationConfig) => {\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n}\r\n\r\nconst enableButton = (buttonElement, validationConfig) => {\r\n  buttonElement.disabled = false;\r\n  buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n}","import './pages/index.css';\r\nimport { createCard, like } from './components/card';\r\nimport { openModal, closeModal, addListenerToPopup } from './components/modal';\r\nimport { enableValidation, clearValidation } from './components/validation';\r\nimport { getProfileData, getInitialCards, postProfileData, postNewCardData, postAvatar, deleteCardFromServer, checkAvatar } from './components/api';\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\nconst cardsTemplate = document.querySelector('#card-template').content;\r\nconst buttonOpenPopupEditAvatar = document.querySelector('.profile__image_container');\r\nconst buttonOpenPopupProfile = document.querySelector('.profile__edit-button');\r\nconst buttonOpenPopupAddNewCard = document.querySelector('.profile__add-button');\r\nconst popupEditAvatar = document.querySelector('.popup_type_update-avatar');\r\nconst popupSureDelete = document.querySelector('.popup_type_sure');\r\nconst popupEditProfile = document.querySelector('.popup_type_edit');\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupFullImage = document.querySelector('.popup_type_image');\r\nconst profileImage = document.querySelector('.profile__image');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst imagePopupFullImage = popupFullImage.querySelector('.popup__image');\r\nconst captionPopupFullImage = popupFullImage.querySelector('.popup__caption');\r\nconst formEditAvatar = document.forms['update-avatar'];\r\nconst formSureDelete = document.forms['sure-popup'];\r\nconst formProfile = document.forms['edit-profile'];\r\nconst formAddNewCard = document.forms['new-place'];\r\nconst inputAvatarLink = document.querySelector('.popup__input_type_avatar');\r\nconst inputProfileTitle = document.querySelector('.popup__input_type_name');\r\nconst inputProfileDescription = document.querySelector('.popup__input_type_description');\r\nconst inputPlaceNameNewCard = document.querySelector('.popup__input_type_card-name');\r\nconst inputLinkImageNewCard = document.querySelector('.popup__input_type_url');\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_inactive',\r\n  inputErrorClass: 'popup__input-error',\r\n  errorClass: 'popup__input-error_active'\r\n}\r\nlet cardForDelete = {};\r\n\r\nconst openImagePopup = (card) => {\r\n  imagePopupFullImage.src = card.src;\r\n  imagePopupFullImage.alt = card.alt; \r\n  captionPopupFullImage.textContent = card.alt; \r\n  openModal(popupFullImage);\r\n}\r\n\r\nconst onDeleteCard = (cardId, cardElement) => {\r\n  cardForDelete = {\r\n    cardId: cardId,\r\n    cardElement: cardElement\r\n  }\r\n  openModal(popupSureDelete);\r\n}\r\n\r\nconst handleEditAvatartFormSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  renderLoading(evt.target.elements.button, true);\r\n  postAvatar(inputAvatarLink.value)\r\n  .then((data) => {\r\n    profileImage.style.backgroundImage = `url('${data.avatar}')`;\r\n    closeModal(popupEditAvatar);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(evt.target.elements.button, false);\r\n  });\r\n} \r\n\r\nconst handleSureDeleteFormSubmit = (evt) => {\r\n\tevt.preventDefault();\r\n  if (!cardForDelete.cardElement) return;\r\n\tdeleteCardFromServer(cardForDelete.cardId)\r\n  .then(() => {\r\n    cardForDelete.cardElement.remove();\r\n    closeModal(popupSureDelete);\r\n    cardForDelete = {};\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n}\r\n\r\nconst handleEditFormSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  renderLoading(evt.target.elements.button, true);\r\n  postProfileData(inputProfileTitle.value, inputProfileDescription.value)\r\n  .then((data) => {\r\n    profileTitle.textContent = data.name;\r\n    profileDescription.textContent = data.about;\r\n    closeModal(popupEditProfile);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(evt.target.elements.button, false);\r\n  });\r\n}\r\n\r\nconst handleAddFormSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  renderLoading(evt.target.elements.button, true);\r\n  postNewCardData(inputPlaceNameNewCard.value, inputLinkImageNewCard.value)\r\n  .then((newCardObject) => {\r\n    const newCard = createCard(newCardObject, cardsTemplate, like, openImagePopup, onDeleteCard, newCardObject.owner._id);\r\n    cardsContainer.prepend(newCard);\r\n    closeModal(popupNewCard);\r\n    evt.target.reset();\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(evt.target.elements.button, false);\r\n    clearValidation(formAddNewCard, validationConfig);\r\n  });\r\n}\r\n\r\nconst renderLoading = (button, isLoading) => {\r\n  if (isLoading) {\r\n    button.textContent = 'Сохранение...';\r\n  } else {\r\n    button.textContent = 'Сохранить';\r\n  }\r\n}\r\n\r\nPromise.all([getProfileData(), getInitialCards()])\r\n.then(([profileData, cardsData]) => {\r\n  profileTitle.textContent = profileData.name;\r\n  profileDescription.textContent = profileData.about;\r\n  profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\r\n  cardsData.forEach((item) => {\r\n    const card = createCard(item, cardsTemplate, like, openImagePopup, onDeleteCard, profileData._id);\r\n    cardsContainer.append(card);\r\n  });\r\n})\r\n.catch((err) => {\r\n  console.log(err);\r\n});\r\n\r\nbuttonOpenPopupEditAvatar.addEventListener('click', function() {\r\n  formEditAvatar.elements.avatar.value = '';\r\n  clearValidation(formEditAvatar, validationConfig);\r\n  openModal(popupEditAvatar);\r\n});\r\n\r\nbuttonOpenPopupProfile.addEventListener('click', function() {\r\n  formProfile.elements.name.value = profileTitle.textContent;\r\n  formProfile.elements.description.value = profileDescription.textContent;\r\n  clearValidation(formProfile, validationConfig);\r\n  openModal(popupEditProfile);\r\n});\r\n\r\nbuttonOpenPopupAddNewCard.addEventListener('click', function() {\r\n  openModal(popupNewCard);\r\n});\r\n\r\nformEditAvatar.addEventListener('submit', handleEditAvatartFormSubmit); \r\n\r\nformSureDelete.addEventListener('submit', handleSureDeleteFormSubmit); \r\n\r\nformProfile.addEventListener('submit', handleEditFormSubmit); \r\n\r\nformAddNewCard.addEventListener('submit', handleAddFormSubmit); \r\n\r\naddListenerToPopup(popupEditAvatar);\r\n\r\naddListenerToPopup(popupSureDelete);\r\n\r\naddListenerToPopup(popupEditProfile);\r\n\r\naddListenerToPopup(popupNewCard);\r\n\r\naddListenerToPopup(popupFullImage);\r\n\r\nenableValidation(validationConfig);"],"names":["config","baseUrl","headers","authorization","handleResponse","response","ok","json","Promise","reject","concat","status","createCard","dataCard","template","like","openImagePopup","onDeleteCard","ownerId","cardElement","querySelector","cloneNode","deleteButton","buttonLikeCard","likesCounter","imageCard","isLiked","likes","map","card","_id","includes","textContent","name","src","link","alt","owner","addEventListener","style","display","evt","target","renderLikes","length","icon","cardId","method","fetch","then","changeLike","classList","contains","data","catch","err","console","log","numberOfLikes","toggle","handleEscKeyUp","key","popup","document","closeModal","openModal","modal","add","remove","removeEventListener","addListenerToPopup","elem","event","checkInputValidity","formElement","inputElement","validationConfig","validity","valid","hideInputError","patternMismatch","setCustomValidity","dataset","patternErrorMessage","showInputError","validationMessage","errorMessage","errorElement","id","inputErrorClass","errorClass","clearValidation","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","forEach","disableButton","toggleButtonState","some","hasInvalidInput","enableButton","disabled","inactiveButtonClass","cardsContainer","cardsTemplate","content","buttonOpenPopupEditAvatar","buttonOpenPopupProfile","buttonOpenPopupAddNewCard","popupEditAvatar","popupSureDelete","popupEditProfile","popupNewCard","popupFullImage","profileImage","profileTitle","profileDescription","imagePopupFullImage","captionPopupFullImage","formEditAvatar","forms","formSureDelete","formProfile","formAddNewCard","inputAvatarLink","inputProfileTitle","inputProfileDescription","inputPlaceNameNewCard","inputLinkImageNewCard","formSelector","cardForDelete","renderLoading","button","isLoading","all","_ref","_ref2","profileData","cardsData","about","backgroundImage","avatar","item","append","elements","value","description","preventDefault","body","JSON","stringify","finally","newCardObject","newCard","prepend","reset","setEventListeners","enableValidation"],"sourceRoot":""}